 
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>网络安全卫士管理系统</title>
    <style>
        :root {
            --primary-red: #d32f2f;
            --dark-red: #b71c1c;
            --light-red: #ffebee;
        }
        body {
            font-family: "Microsoft Yahei", sans-serif;
            margin: 0;
            background: var(--light-red);
        }
        .header {
            background: var(--dark-red);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }
        .panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: var(--primary-red);
            color: white;
        }
        .violation-tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .danger { background: #ff1744; color: white; }
        .warning { background: #ff9100; color: white; }
        button {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
        }
        .ban-btn { background: var(--primary-red); color: white; }
        .unban-btn { background: #4caf50; color: white; }
    </style>
</head>
<body>
    <div class="header">
        <h1>网络安全卫士管理系统</h1>
        <p>已保护网络空间安全 <span id="totalBanned">0</span> 天 | 累计封禁IP：<span id="bannedCount">0</span></p>
    </div>
    
    <div class="container">
        <div class="panel">
            <h2>审核列表 (<span id="reviewCount">0</span>)</h2>
            <table id="reviewList"></table>
        </div>
        <div class="panel">
            <h2>封禁列表 (<span id="bannedListCount">0</span>)</h2>
            <table id="bannedList"></table>
        </div>
    </div>

<script>
const VIOLATIONS =['色情', '开盒', '赌博', '诈骗', '恐吓', '暴力', 
            '血腥', '叛国', '黑客', '毒品', '走私', '造假',
            '侵权', '间谍', '洗钱', '恐怖主义', '谣言', '恶意软件',
            '网络攻击', '盗版', '非法集会', '泄露国家秘密', 
            '颠覆国家政权', '分裂国家', '煽动民族仇恨', '邪教',
            '侵犯隐私', '非法交易', '违禁品', '虚假信息'/];

// 初始化数据存储
let state = {
    allIPs: [],
    bannedIPs: JSON.parse(localStorage.getItem('bannedIPs')) || [],
    generatedIPs: new Set()
};

// 生成随机IP
function generateIP() {
    let ip;
    do {
        ip = Array.from({length:4}, () => Math.floor(Math.random() * 256)).join('.');
    } while(state.generatedIPs.has(ip));
    state.generatedIPs.add(ip);
    return ip;
}

// 创建IP数据
function createIPData() {
    const isViolation = Math.random() > (0.28 + Math.random()*0.61); // 动态违规率
    return {
        ip: generateIP(),
        isViolation,
        violationType: isViolation ? VIOLATIONS[Math.floor(Math.random()*VIOLATIONS.length)] : null,
        timestamp: new Date().toLocaleString()
    };
}

// 渲染表格
function renderTables() {
    const reviewList = document.getElementById('reviewList');
    const bannedList = document.getElementById('bannedList');
    
    // 清空现有内容
    reviewList.innerHTML = '<tr><th>IP地址</th><th>状态</th><th>操作</th></tr>';
    bannedList.innerHTML = '<tr><th>IP地址</th><th>封禁原因</th><th>操作</th></tr>';

    // 渲染审核列表
    state.allIPs.filter(ip => !state.bannedIPs.includes(ip.ip)).forEach(ip => {
        const row = reviewList.insertRow();
        row.innerHTML = `
            <td>${ip.ip}</td>
            <td>${ip.isViolation ? `<span class="violation-tag danger">${ip.violationType}</span>` : 
                 '<span class="violation-tag warning">待审查</span>'}</td>
            <td><button class="ban-btn" onclick="banIP('${ip.ip}')">${ip.isViolation ? '立即封禁' : '标记审查'}</button></td>
        `;
    });

    // 渲染封禁列表
    state.bannedIPs.forEach(ip => {
        const row = bannedList.insertRow();
        row.innerHTML = `
            <td>${ip}</td>
            <td>${state.allIPs.find(x => x.ip === ip)?.violationType || '人工审查'}</td>
            <td><button class="unban-btn" onclick="unbanIP('${ip}')">解除封禁</button></td>
        `;
    });

    // 更新统计数据
    document.getElementById('reviewCount').textContent = state.allIPs.length - state.bannedIPs.length;
    document.getElementById('bannedListCount').textContent = state.bannedIPs.length;
    document.getElementById('bannedCount').textContent = state.bannedIPs.length;
    localStorage.setItem('bannedIPs', JSON.stringify(state.bannedIPs));
}

// 封禁操作
function banIP(ip) {
    if (!state.bannedIPs.includes(ip)) {
        state.bannedIPs.push(ip);
        renderTables();
    }
}

// 解封操作
function unbanIP(ip) {
    state.bannedIPs = state.bannedIPs.filter(x => x !== ip);
    renderTables();
}

// 初始化
function init() {
    // 生成500个不重复IP
    while(state.allIPs.length < 500) {
        state.allIPs.push(createIPData());
    }
    renderTables();
    
    // 每30秒自动刷新
    setInterval(() => {
        state.allIPs = state.allIPs.slice(50).concat(Array.from({length:50}, createIPData));
        renderTables();
    }, 30000);
}

init();
</script>
</body>
</html>
 